# üöÄ AI Conspects Server - Windows Deployment

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è AI Conspects —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ device registration + JWT
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∑–∞–º–µ—Ç–∫–∞–º–∏  
- ‚úÖ AI —á–∞—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∑–∞–º–µ—Ç–æ–∫
- ‚úÖ SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ª–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU (RTX 4090) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üèÉ‚Äç‚ôÇÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
```bash
git clone https://github.com/brainnotincluded/ai-conspects-server.git
cd ai-conspects-server
```

### 2. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
python -m venv .venv
.venv\Scripts\activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install fastapi uvicorn sqlalchemy python-jose[cryptography] passlib[bcrypt] python-multipart
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
start_server.bat

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
python ios_compatible_server.py
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞:
http://localhost:5000

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ health endpoint:
curl http://localhost:5000/health
```

## üì± iOS App Endpoints

–°–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ endpoints –¥–ª—è iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

### üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `GET /auth/generate-device-id` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è device ID
- `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `GET /auth/me` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

### üéôÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ  
- `POST /batches/upload-files` - –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤
- `GET /batches/{batch_id}` - –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `GET /batches/{batch_id}/results` - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

### üìù –ó–∞–º–µ—Ç–∫–∏
- `GET /notes/` - –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫
- `GET /notes/{note_id}` - –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞
- `POST /notes/{note_id}/toggle-favorite` - –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- `GET /notes/popular-tags` - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–≥–∏

### ü§ñ AI –ß–∞—Ç
- `POST /chat/query` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è AI
- `POST /chat/study-plan` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –æ–±—É—á–µ–Ω–∏—è

### ‚ù§Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–∞—é—Ç—Å—è –≤ `ios_compatible_server.py`:
- **–ü–æ—Ä—Ç**: 5000 
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (`ai_conspects.db`)
- **JWT**: 24-—á–∞—Å–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã
- **CORS**: –†–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ –¥–æ–º–µ–Ω—ã (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### GPU –ø–æ–¥–¥–µ—Ä–∂–∫–∞  
–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –Ω–∞–ª–∏—á–∏–µ GPU:
- ‚úÖ **RTX 4090 –Ω–∞–π–¥–µ–Ω–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚ö†Ô∏è **GPU –Ω–µ –Ω–∞–π–¥–µ–Ω–∞**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
JWT_SECRET_KEY=your-production-jwt-secret-key
OPENROUTER_API_KEY=your-openrouter-api-key  
PERPLEXITY_API_KEY=your-perplexity-api-key
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
```bash
curl http://localhost:5000/health
```
**–û–∂–∏–¥–∞–µ—Ç—Å—è**: `{"status": "healthy", "message": "Server is running"}`

### 2. –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Device ID  
```bash
curl http://localhost:5000/auth/generate-device-id
```
**–û–∂–∏–¥–∞–µ—Ç—Å—è**: `{"device_id": "device_abc123...", "instructions": "..."}`

### 3. –¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```bash
curl -X POST http://localhost:5000/auth/register \
  -H "Content-Type: application/json" \
  -d '{"device_id": "device_test123"}'
```
**–û–∂–∏–¥–∞–µ—Ç—Å—è**: JWT —Ç–æ–∫–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ

### 4. –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª iOS –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```bash
# 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º device_id
DEVICE_ID=$(curl -s http://localhost:5000/auth/generate-device-id | jq -r '.device_id')

# 2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ  
TOKEN=$(curl -s -X POST http://localhost:5000/auth/register \
  -H "Content-Type: application/json" \
  -d "{\"device_id\": \"$DEVICE_ID\"}" | jq -r '.access_token')

# 3. –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
curl -H "Authorization: Bearer $TOKEN" http://localhost:5000/auth/me
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 5000 —Å–≤–æ–±–æ–¥–µ–Ω: `netstat -an | find ":5000"`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Python 3.8+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `python --version`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ: `.venv\Scripts\activate`

### iOS App –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è  
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω: `curl http://your-server-ip:5000/health`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ firewall –Ω–∞ Windows
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∏
- –£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª `ai_conspects.db` –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### GPU –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PyTorch —Å CUDA –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π: `pip install torch --index-url https://download.pytorch.org/whl/cu121`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä–∞–π–≤–µ—Ä—ã NVIDIA: `nvidia-smi`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
–°–µ—Ä–≤–µ—Ä –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:
- ‚úÖ **INFO**: –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- ‚ö†Ô∏è **WARNING**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- ‚ùå **ERROR**: –û—à–∏–±–∫–∏

### Health Check
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
while true; do 
  curl -s http://localhost:5000/health | jq '.status'
  sleep 30
done
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
SQLite –±–∞–∑–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ–∞–π–ª–µ `ai_conspects.db`:
- **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **notes** - –ó–∞–º–µ—Ç–∫–∏  
- **batches** - –ë–∞—Ç—á–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ

## üéØ –ì–æ—Ç–æ–≤–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:
1. –ü–æ–º–µ–Ω—è–π—Ç–µ `JWT_SECRET_KEY` –Ω–∞ –Ω–∞–¥–µ–∂–Ω—ã–π –∫–ª—é—á
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è nginx reverse proxy)  
3. –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –Ω–∞ PostgreSQL –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
5. –î–æ–±–∞–≤—å—Ç–µ backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

**üî• –°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –≤–∞—à–∏–º iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º!**

–í—Å–µ endpoints —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `start_server.bat` –∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç.